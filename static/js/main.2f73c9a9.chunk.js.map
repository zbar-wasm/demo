{"version":3,"sources":["../../src/Symbol.ts","../../src/Image.ts","../../src/CppObject.ts","../../src/instance.ts","../../src/ImageScanner.ts","../../src/index.ts","index.js","../../src/enum.ts","../../src/load-browser.ts","../../zbar.wasm/dist/zbar.wasm.bin","../../zbar.wasm/dist/zbar.js","../../src/module.ts"],"names":["r","exports","CppObject","instPromise","handleResize","width","document","documentElement","clientWidth","height","clientHeight","video","getElementById","canvas","videoWidth","videoHeight","style","init","a","window","onresize","navigator","mediaDevices","getUserMedia","audio","facingMode","max","mediaStream","srcObject","setAttribute","play","Promise","onloadedmetadata","render","symbols","footer","ctx","getContext","clearRect","firstChild","removeChild","lastChild","font","strokeStyle","fillStyle","lineWidth","i","length","sym","points","beginPath","j","x","y","moveTo","lineTo","closePath","stroke","fillText","div","createElement","className","innerText","typeName","decode","appendChild","scan","drawImage","imgData","getImageData","scanImageData","res","sleep","ms","setTimeout","body","console","error","main","ZBarSymbolType","ZBarConfigType","module","instantiate","_scriptDir","currentScript","src","undefined","__filename","readyPromiseResolve","readyPromiseReject","Module","resolve","reject","key","moduleOverrides","hasOwnProperty","read_","readAsync","readBinary","nodeFS","nodePath","arguments_","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","importScripts","ENVIRONMENT_IS_NODE","process","versions","node","scriptDirectory","require","dirname","__dirname","filename","binary","text","ret","buffer","Uint8Array","abort","onload","onerror","err","data","replace","slice","ex","ExitStatus","reason","status","toThrow","noExitRuntime","e","self","location","href","indexOf","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","responseType","response","wasmBinary","out","log","bind","warn","wasmMemory","WebAssembly","ABORT","HEAPU8","HEAP32","UTF8Decoder","TextDecoder","UTF8ArrayToString","heap","idx","maxBytesToRead","endIdx","endPtr","subarray","str","u0","u1","u2","String","fromCharCode","ch","updateGlobalBufferAndViews","buf","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","wasmTable","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","runDependencies","runDependencyWatcher","dependenciesFulfilled","what","RuntimeError","wasmBinaryFile","path","_emscripten_get_now","isDataURI","startsWith","isFileURI","getBinary","file","callRuntimeCallbacks","callbacks","callback","shift","func","arg","getWasmTableEntry","funcPtr","get","t","performance","now","emscripten_realloc_buffer","size","grow","byteLength","SYSCALLS","mappings","buffers","printChar","stream","curr","push","varargs","getStr","ptr","UTF8ToString","get64","low","high","calledRun","asmLibraryArg","clk_id","tp","value","Date","___errno_location","dest","num","copyWithin","requestedSize","multiple","oldSize","cutDown","overGrownHeapSize","Math","min","fd","offset_low","offset_high","whence","newOffset","iov","iovcnt","pnum","len","info","receiveInstance","instance","cb","unshift","id","clearInterval","removeRunDependency","receiveInstantiationResult","result","instantiateArrayBuffer","receiver","fetch","credentials","then","catch","getBinaryPromise","instantiateStreaming","createWasm","apply","arguments","this","name","message","run","args","doRun","postRun","preRun","runCaller","pop","ready","scanImage"],"mappings":"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","file":"static/js/main.2f73c9a9.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Symbol = void 0;\nconst enum_1 = require(\"./enum\");\nclass TypePointer {\n    constructor(ptr, buf) {\n        this.ptr = ptr;\n        this.ptr32 = ptr >> 2;\n        this.buf = buf;\n        this.HEAP8 = new Int8Array(buf);\n        this.HEAPU32 = new Uint32Array(buf);\n        this.HEAP32 = new Int32Array(buf);\n    }\n}\nclass SymbolPtr extends TypePointer {\n    get type() {\n        return this.HEAPU32[this.ptr32];\n    }\n    get data() {\n        const len = this.HEAPU32[this.ptr32 + 4];\n        const ptr = this.HEAPU32[this.ptr32 + 5];\n        return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\n    }\n    get points() {\n        const len = this.HEAPU32[this.ptr32 + 7];\n        const ptr = this.HEAPU32[this.ptr32 + 8];\n        const ptr32 = ptr >> 2;\n        const res = [];\n        for (let i = 0; i < len; ++i) {\n            const x = this.HEAP32[ptr32 + i * 2];\n            const y = this.HEAP32[ptr32 + i * 2 + 1];\n            res.push({ x, y });\n        }\n        return res;\n    }\n    get next() {\n        const ptr = this.HEAPU32[this.ptr32 + 11];\n        if (!ptr)\n            return null;\n        return new SymbolPtr(ptr, this.buf);\n    }\n    get time() {\n        return this.HEAPU32[this.ptr32 + 13];\n    }\n    get cacheCount() {\n        return this.HEAP32[this.ptr32 + 14];\n    }\n    get quality() {\n        return this.HEAP32[this.ptr32 + 15];\n    }\n}\nclass SymbolSetPtr extends TypePointer {\n    get head() {\n        const ptr = this.HEAPU32[this.ptr32 + 2];\n        if (!ptr)\n            return null;\n        return new SymbolPtr(ptr, this.buf);\n    }\n}\nclass Symbol {\n    constructor(ptr) {\n        this.type = ptr.type;\n        this.typeName = enum_1.ZBarSymbolType[this.type];\n        this.data = ptr.data;\n        this.points = ptr.points;\n        this.time = ptr.time;\n        this.cacheCount = ptr.cacheCount;\n        this.quality = ptr.quality;\n    }\n    static createSymbolsFromPtr(ptr, buf) {\n        if (ptr == 0)\n            return [];\n        const set = new SymbolSetPtr(ptr, buf);\n        let symbol = set.head;\n        const res = [];\n        while (symbol !== null) {\n            res.push(new Symbol(symbol));\n            symbol = symbol.next;\n        }\n        return res;\n    }\n    decode(encoding) {\n        const decoder = new TextDecoder(encoding);\n        return decoder.decode(this.data);\n    }\n}\nexports.Symbol = Symbol;\n//# sourceMappingURL=Symbol.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Image = void 0;\nconst CppObject_1 = require(\"./CppObject\");\nconst Symbol_1 = require(\"./Symbol\");\nconst instance_1 = require(\"./instance\");\nclass Image extends CppObject_1.CppObject {\n    static async createFromGrayBuffer(width, height, dataBuf, sequence_num = 0) {\n        const inst = await instance_1.getInstance();\n        const heap = inst.HEAPU8;\n        const data = new Uint8Array(dataBuf);\n        const len = width * height;\n        if (len !== data.byteLength) {\n            throw Error('dataBuf does not match width and height');\n        }\n        const buf = inst._malloc(len);\n        heap.set(data, buf);\n        const ptr = inst._Image_create(width, height, 0x30303859 /* Y800 */, buf, len, sequence_num);\n        return new this(ptr, inst);\n    }\n    static async createFromRGBABuffer(width, height, dataBuf, sequence_num = 0) {\n        const inst = await instance_1.getInstance();\n        const heap = inst.HEAPU8;\n        const data = new Uint8Array(dataBuf);\n        const len = width * height;\n        if (len * 4 !== data.byteLength) {\n            throw Error('dataBuf does not match width and height');\n        }\n        const buf = inst._malloc(len);\n        for (let i = 0; i < len; ++i) {\n            const r = data[i * 4];\n            const g = data[i * 4 + 1];\n            const b = data[i * 4 + 2];\n            heap[buf + i] = (r * 19595 + g * 38469 + b * 7472) >> 16;\n        }\n        const ptr = inst._Image_create(width, height, 0x30303859 /* Y800 */, buf, len, sequence_num);\n        return new this(ptr, inst);\n    }\n    destroy() {\n        this.checkAlive();\n        this.inst._Image_destory(this.ptr);\n        this.ptr = 0;\n    }\n    getSymbols() {\n        this.checkAlive();\n        const res = this.inst._Image_get_symbols(this.ptr);\n        return Symbol_1.Symbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer);\n    }\n}\nexports.Image = Image;\n//# sourceMappingURL=Image.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CppObject = void 0;\nclass CppObject {\n    constructor(ptr, inst) {\n        this.ptr = ptr;\n        this.inst = inst;\n    }\n    checkAlive() {\n        if (this.ptr)\n            return;\n        throw Error('Call after destroyed');\n    }\n    getPointer() {\n        this.checkAlive();\n        return this.ptr;\n    }\n}\nexports.CppObject = CppObject;\n//# sourceMappingURL=CppObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getInstance = void 0;\nconst load_1 = require(\"./load\");\nlet inst = null;\nlet instPromise = (async () => {\n    inst = await load_1.loadWasmInstance({});\n    if (!inst) {\n        throw Error('WASM was not loaded');\n    }\n    return inst;\n})();\nexports.getInstance = async () => {\n    return await instPromise;\n};\n//# sourceMappingURL=instance.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageScanner = void 0;\nconst CppObject_1 = require(\"./CppObject\");\nconst instance_1 = require(\"./instance\");\nconst Symbol_1 = require(\"./Symbol\");\nclass ImageScanner extends CppObject_1.CppObject {\n    static async create() {\n        const inst = await instance_1.getInstance();\n        const ptr = inst._ImageScanner_create();\n        return new this(ptr, inst);\n    }\n    destroy() {\n        this.checkAlive();\n        this.inst._ImageScanner_destory(this.ptr);\n        this.ptr = 0;\n    }\n    setConfig(sym, conf, value) {\n        this.checkAlive();\n        return this.inst._ImageScanner_set_config(this.ptr, sym, conf, value);\n    }\n    enableCache(enable = true) {\n        this.checkAlive();\n        this.inst._ImageScanner_enable_cache(this.ptr, enable);\n    }\n    recycleImage(image) {\n        this.checkAlive();\n        this.inst._ImageScanner_recycle_image(this.ptr, image.getPointer());\n    }\n    getResults() {\n        this.checkAlive();\n        const res = this.inst._ImageScanner_get_results(this.ptr);\n        return Symbol_1.Symbol.createSymbolsFromPtr(res, this.inst.HEAPU8.buffer);\n    }\n    scan(image) {\n        this.checkAlive();\n        return this.inst._ImageScanner_scan(this.ptr, image.getPointer());\n    }\n}\nexports.ImageScanner = ImageScanner;\n//# sourceMappingURL=ImageScanner.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./Image\"), exports);\n__exportStar(require(\"./ImageScanner\"), exports);\n__exportStar(require(\"./module\"), exports);\n__exportStar(require(\"./Symbol\"), exports);\n//# sourceMappingURL=index.js.map","import { scanImageData } from 'zbar.wasm';\n\nconst SCAN_PROID_MS = 800;\n\nconst handleResize = () => {\n  const width = document.documentElement.clientWidth;\n  const height = document.documentElement.clientHeight;\n  const video = document.getElementById('video');\n  video.width = width;\n  video.height = height;\n\n  const canvas = document.getElementById('canvas');\n  canvas.width = video.videoWidth;\n  canvas.height = video.videoHeight;\n  if (width / video.videoWidth < height / video.videoHeight) {\n    canvas.style.width = '100vw';\n    canvas.style.height = 'auto';\n  } else {\n    canvas.style.width = 'auto';\n    canvas.style.height = '100vh';\n  }\n};\n\nconst init = async () => {\n  window.onresize = handleResize;\n  const mediaStream = await navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: {\n        facingMode: 'environment',\n        width: { max: 640 },\n        height: { max: 640 }\n      }\n    });\n  const video = document.getElementById('video');\n  video.srcObject = mediaStream;\n  video.setAttribute('playsinline', '');\n  video.play();\n  await new Promise(r => {\n    video.onloadedmetadata = r;\n  });\n  handleResize();\n};\n\nconst render = (symbols) => {\n  const canvas = document.getElementById('canvas');\n  const footer = document.getElementById('footer');\n  const ctx = canvas.getContext('2d');\n  const width = canvas.width;\n  const height = canvas.height;\n  ctx.clearRect(0, 0, width, height);\n  while (footer.firstChild) {\n    footer.removeChild(footer.lastChild);\n  }\n  ctx.font = '20px serif';\n  ctx.strokeStyle = '#00ff00';\n  ctx.fillStyle = '#ff0000';\n  ctx.lineWidth = 6;\n  for (let i = 0; i < symbols.length; ++i) {\n    const sym = symbols[i];\n    const points = sym.points;\n    ctx.beginPath();\n    for (let j = 0; j < points.length; ++j) {\n      const { x, y } = points[j];\n      if (j === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fillText('#' + i, points[0].x, points[0].y - 10);\n\n    const div = document.createElement('div');\n    div.className = 'footerItem';\n    div.innerText = `#${i}: Type: ${sym.typeName}; Value: \"${sym.decode()}\"`\n    footer.appendChild(div);\n  }\n};\n\nconst scan = async () => {\n  const canvas = document.createElement('canvas');\n  const video = document.getElementById('video');\n  const width = video.videoWidth;\n  const height = video.videoHeight;\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(video, 0, 0, width, height);\n  const imgData = ctx.getImageData(0, 0, width, height);\n  const res = await scanImageData(imgData);\n  // console.log(res, Date.now());\n  render(res);\n};\n\nconst sleep = ms => new Promise(r => { setTimeout(r, ms) });\n\nconst main = async () => {\n  try {\n    await init();\n    while (true) {\n      await scan();\n      await sleep(SCAN_PROID_MS);\n    }\n  } catch (err) {\n    const div = document.createElement('div');\n    div.className = 'full middle';\n    div.style = 'height: 72px; width: 100%; text-align: center; font-size: 36px';\n    div.innerText = 'Cannot get cammera: ' + err;\n    document.body.appendChild(div);\n    console.error(err);\n  }\n};\n\nmain();","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ZBarConfigType = exports.ZBarSymbolType = void 0;\nvar ZBarSymbolType;\n(function (ZBarSymbolType) {\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_NONE\"] = 0] = \"ZBAR_NONE\"; /**< no symbol decoded */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_PARTIAL\"] = 1] = \"ZBAR_PARTIAL\"; /**< intermediate status */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_EAN8\"] = 8] = \"ZBAR_EAN8\"; /**< EAN-8 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_UPCE\"] = 9] = \"ZBAR_UPCE\"; /**< UPC-E */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_ISBN10\"] = 10] = \"ZBAR_ISBN10\"; /**< ISBN-10 (from EAN-13). @since 0.4 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_UPCA\"] = 12] = \"ZBAR_UPCA\"; /**< UPC-A */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_EAN13\"] = 13] = \"ZBAR_EAN13\"; /**< EAN-13 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_ISBN13\"] = 14] = \"ZBAR_ISBN13\"; /**< ISBN-13 (from EAN-13). @since 0.4 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_I25\"] = 25] = \"ZBAR_I25\"; /**< Interleaved 2 of 5. @since 0.4 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_CODE39\"] = 39] = \"ZBAR_CODE39\"; /**< Code 39. @since 0.4 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_PDF417\"] = 57] = \"ZBAR_PDF417\"; /**< PDF417. @since 0.6 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_QRCODE\"] = 64] = \"ZBAR_QRCODE\"; /**< QR Code. @since 0.10 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_CODE128\"] = 128] = \"ZBAR_CODE128\"; /**< Code 128 */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_SYMBOL\"] = 255] = \"ZBAR_SYMBOL\"; /**< mask for base symbol type */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_ADDON2\"] = 512] = \"ZBAR_ADDON2\"; /**< 2-digit add-on flag */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_ADDON5\"] = 1280] = \"ZBAR_ADDON5\"; /**< 5-digit add-on flag */\n    ZBarSymbolType[ZBarSymbolType[\"ZBAR_ADDON\"] = 1792] = \"ZBAR_ADDON\"; /**< add-on flag mask */\n})(ZBarSymbolType = exports.ZBarSymbolType || (exports.ZBarSymbolType = {}));\nvar ZBarConfigType;\n(function (ZBarConfigType) {\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_ENABLE\"] = 0] = \"ZBAR_CFG_ENABLE\"; /**< enable symbology/feature */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_ADD_CHECK\"] = 1] = \"ZBAR_CFG_ADD_CHECK\"; /**< enable check digit when optional */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_EMIT_CHECK\"] = 2] = \"ZBAR_CFG_EMIT_CHECK\"; /**< return check digit when present */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_ASCII\"] = 3] = \"ZBAR_CFG_ASCII\"; /**< enable full ASCII character set */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_NUM\"] = 4] = \"ZBAR_CFG_NUM\"; /**< number of boolean decoder configs */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_MIN_LEN\"] = 32] = \"ZBAR_CFG_MIN_LEN\"; /**< minimum data length for valid decode */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_MAX_LEN\"] = 33] = \"ZBAR_CFG_MAX_LEN\"; /**< maximum data length for valid decode */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_UNCERTAINTY\"] = 64] = \"ZBAR_CFG_UNCERTAINTY\"; /**< required video consistency frames */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_POSITION\"] = 128] = \"ZBAR_CFG_POSITION\"; /**< enable scanner to collect position data */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_X_DENSITY\"] = 256] = \"ZBAR_CFG_X_DENSITY\"; /**< image scanner vertical scan density */\n    ZBarConfigType[ZBarConfigType[\"ZBAR_CFG_Y_DENSITY\"] = 257] = \"ZBAR_CFG_Y_DENSITY\"; /**< image scanner horizontal scan density */\n})(ZBarConfigType = exports.ZBarConfigType || (exports.ZBarConfigType = {}));\n//# sourceMappingURL=enum.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadWasmInstance = void 0;\n/**\n * Webpack will try to parse .wasm file even if file-loader is used. Using\n * extension .wasm.bin as a workaround.\n * See https://github.com/webpack/webpack/issues/6725.\n * To facilitate streaming compilation by the browser, .wasm.bin files\n * should be served as MIME type 'application/wasm'.\n */\n// import wasmBinaryFile from './zbar.wasm';\nconst zbar_wasm_bin_1 = __importDefault(require(\"./zbar.wasm.bin\"));\nconst zbar_1 = __importDefault(require(\"./zbar\"));\n// Use to override the file path to the path provided by file-loader.\nconst locateFile = (file, _scriptDir) => {\n    if (file != 'zbar.wasm') {\n        console.error('Unexpected file:', file);\n    }\n    return zbar_wasm_bin_1.default;\n};\nexports.loadWasmInstance = async (importObj) => {\n    importObj['locateFile'] = locateFile;\n    return await zbar_1.default(importObj);\n};\n//# sourceMappingURL=load-browser.js.map","module.exports = __webpack_public_path__ + \"static/media/zbar.wasm.5f90df22.bin\";","\nvar instantiate = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(instantiate) {\n  instantiate = instantiate || {};\n\nvar Module=typeof instantiate!==\"undefined\"?instantiate:{};var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram=\"./this.program\";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=typeof window===\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts===\"function\";var ENVIRONMENT_IS_NODE=typeof process===\"object\"&&typeof process.versions===\"object\"&&typeof process.versions.node===\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;function logExceptionOnExit(e){if(e instanceof ExitStatus)return;var toLog=e;err(\"exiting due to exception: \"+toLog)}var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require(\"path\").dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);return nodeFS[\"readFileSync\"](filename,binary?null:\"utf8\")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};readAsync=function readAsync(filename,onload,onerror){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);nodeFS[\"readFile\"](filename,function(err,data){if(err)onerror(err);else onload(data.buffer)})};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"uncaughtException\",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process[\"on\"](\"unhandledRejection\",function(reason){throw reason});quit_=function(status,toThrow){if(keepRuntimeAlive()){process[\"exitCode\"]=status;throw toThrow}logExceptionOnExit(toThrow);process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!==\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!==\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(\"Assertion failed: \"+text)}}var UTF8Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(heap,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heap[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heap.subarray&&UTF8Decoder){return UTF8Decoder.decode(heap.subarray(idx,endPtr))}else{var str=\"\";while(idx<endPtr){var u0=heap[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heap[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heap[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heap[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"}function alignUp(x,multiple){if(x%multiple>0){x+=multiple-x%multiple}return x}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module[\"INITIAL_MEMORY\"]||16777216;var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module[\"preloadedImages\"]={};Module[\"preloadedAudios\"]={};function abort(what){{if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -s ASSERTIONS=1 for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;wasmBinaryFile=\"zbar.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}else{throw\"both async and sync fetching of the wasm failed\"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch===\"function\"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={\"a\":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module[\"asm\"]=exports;wasmMemory=Module[\"asm\"][\"g\"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmTable=Module[\"asm\"][\"s\"];addOnInit(Module[\"asm\"][\"h\"]);removeRunDependency(\"wasm-instantiate\")}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(function(instance){return instance}).then(receiver,function(reason){err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming===\"function\"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&typeof fetch===\"function\"){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiationResult,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(receiveInstantiationResult)})})}else{return instantiateArrayBuffer(receiveInstantiationResult)}}if(Module[\"instantiateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);return false}}instantiateAsync().catch(readyPromiseReject);return{}}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback==\"function\"){callback(Module);continue}var func=callback.func;if(typeof func===\"number\"){if(callback.arg===undefined){getWasmTableEntry(func)()}else{getWasmTableEntry(func)(callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr)}var _emscripten_get_now;if(ENVIRONMENT_IS_NODE){_emscripten_get_now=function(){var t=process[\"hrtime\"]();return t[0]*1e3+t[1]/1e6}}else _emscripten_get_now=function(){return performance.now()};var _emscripten_get_now_is_monotonic=true;function setErrNo(value){HEAP32[___errno_location()>>2]=value;return value}function _clock_gettime(clk_id,tp){var now;if(clk_id===0){now=Date.now()}else if((clk_id===1||clk_id===4)&&_emscripten_get_now_is_monotonic){now=_emscripten_get_now()}else{setErrNo(28);return-1}HEAP32[tp>>2]=now/1e3|0;HEAP32[tp+4>>2]=now%1e3*1e3*1e3|0;return 0}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function emscripten_realloc_buffer(size){try{wasmMemory.grow(size-buffer.byteLength+65535>>>16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize=requestedSize>>>0;var maxHeapSize=2147483648;if(requestedSize>maxHeapSize){return false}for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=emscripten_realloc_buffer(newSize);if(replacement){return true}}return false}var SYSCALLS={mappings:{},buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},get64:function(low,high){return low}};function _fd_close(fd){return 0}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){}function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov>>2];var len=HEAP32[iov+4>>2];iov+=8;for(var j=0;j<len;j++){SYSCALLS.printChar(fd,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}var asmLibraryArg={\"f\":_clock_gettime,\"c\":_emscripten_memcpy_big,\"d\":_emscripten_resize_heap,\"e\":_fd_close,\"b\":_fd_seek,\"a\":_fd_write};var asm=createWasm();var ___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=function(){return(___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=Module[\"asm\"][\"h\"]).apply(null,arguments)};var _ImageScanner_create=Module[\"_ImageScanner_create\"]=function(){return(_ImageScanner_create=Module[\"_ImageScanner_create\"]=Module[\"asm\"][\"i\"]).apply(null,arguments)};var _ImageScanner_destory=Module[\"_ImageScanner_destory\"]=function(){return(_ImageScanner_destory=Module[\"_ImageScanner_destory\"]=Module[\"asm\"][\"j\"]).apply(null,arguments)};var _ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=function(){return(_ImageScanner_set_config=Module[\"_ImageScanner_set_config\"]=Module[\"asm\"][\"k\"]).apply(null,arguments)};var _ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=function(){return(_ImageScanner_enable_cache=Module[\"_ImageScanner_enable_cache\"]=Module[\"asm\"][\"l\"]).apply(null,arguments)};var _ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=function(){return(_ImageScanner_recycle_image=Module[\"_ImageScanner_recycle_image\"]=Module[\"asm\"][\"m\"]).apply(null,arguments)};var _ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=function(){return(_ImageScanner_get_results=Module[\"_ImageScanner_get_results\"]=Module[\"asm\"][\"n\"]).apply(null,arguments)};var _ImageScanner_scan=Module[\"_ImageScanner_scan\"]=function(){return(_ImageScanner_scan=Module[\"_ImageScanner_scan\"]=Module[\"asm\"][\"o\"]).apply(null,arguments)};var _Image_create=Module[\"_Image_create\"]=function(){return(_Image_create=Module[\"_Image_create\"]=Module[\"asm\"][\"p\"]).apply(null,arguments)};var _Image_destory=Module[\"_Image_destory\"]=function(){return(_Image_destory=Module[\"_Image_destory\"]=Module[\"asm\"][\"q\"]).apply(null,arguments)};var _Image_get_symbols=Module[\"_Image_get_symbols\"]=function(){return(_Image_get_symbols=Module[\"_Image_get_symbols\"]=Module[\"asm\"][\"r\"]).apply(null,arguments)};var ___errno_location=Module[\"___errno_location\"]=function(){return(___errno_location=Module[\"___errno_location\"]=Module[\"asm\"][\"t\"]).apply(null,arguments)};var _free=Module[\"_free\"]=function(){return(_free=Module[\"_free\"]=Module[\"asm\"][\"u\"]).apply(null,arguments)};var _malloc=Module[\"_malloc\"]=function(){return(_malloc=Module[\"_malloc\"]=Module[\"asm\"][\"v\"]).apply(null,arguments)};var calledRun;function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}Module[\"run\"]=run;if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return instantiate.ready\n}\n);\n})();\nif (typeof exports === 'object' && typeof module === 'object')\n  module.exports = instantiate;\nelse if (typeof define === 'function' && define['amd'])\n  define([], function() { return instantiate; });\nelse if (typeof exports === 'object')\n  exports[\"instantiate\"] = instantiate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scanImageData = exports.scanRGBABuffer = exports.scanGrayBuffer = exports.getDefaultScanner = void 0;\nconst Image_1 = require(\"./Image\");\nconst ImageScanner_1 = require(\"./ImageScanner\");\nconst defaultScannerPromise = ImageScanner_1.ImageScanner.create();\nexports.getDefaultScanner = async () => {\n    return await defaultScannerPromise;\n};\nconst scanImage = async (image, scanner) => {\n    if (scanner === undefined) {\n        scanner = await defaultScannerPromise;\n    }\n    const res = scanner.scan(image);\n    if (res < 0) {\n        throw Error('Scan Failed');\n    }\n    if (res === 0)\n        return [];\n    return image.getSymbols();\n};\nexports.scanGrayBuffer = async (buffer, width, height, scanner) => {\n    const image = await Image_1.Image.createFromGrayBuffer(width, height, buffer);\n    const res = await scanImage(image, scanner);\n    image.destroy();\n    return res;\n};\nexports.scanRGBABuffer = async (buffer, width, height, scanner) => {\n    const image = await Image_1.Image.createFromRGBABuffer(width, height, buffer);\n    const res = await scanImage(image, scanner);\n    image.destroy();\n    return res;\n};\nexports.scanImageData = async (image, scanner) => {\n    return await exports.scanRGBABuffer(image.data.buffer, image.width, image.height, scanner);\n};\n//# sourceMappingURL=module.js.map"],"sourceRoot":""}